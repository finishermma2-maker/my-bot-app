<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞ BEGY */
        :root {
            --bg-base: #101010;          /* –°–∞–º—ã–π —Ç–µ–º–Ω—ã–π —Ñ–æ–Ω (–ø–æ–¥–ª–æ–∂–∫–∞) */
            --bg-surface: #1e1e1e;       /* –§–æ–Ω –∫–∞—Ä—Ç–æ—á–µ–∫ –∏ –ø–∞–Ω–µ–ª–µ–π */
            --bg-surface-light: #2c2c2e; /* –°–≤–µ—Ç–ª—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö */
            --accent: #b4f04b;           /* –ù–µ–æ–Ω–æ–≤—ã–π –∑–µ–ª–µ–Ω—ã–π */
            --text-main: #ffffff;        /* –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç */
            --text-muted: #8e8e93;       /* –°–µ—Ä—ã–π —Ç–µ–∫—Å—Ç */
            --border: #333333;           /* –õ–∏–Ω–∏–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π */
        }
        
        body {
            background-color: var(--bg-base);
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif;
            margin: 0; padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        /* –ö–û–ù–¢–ï–ô–ù–ï–†–´ –≠–ö–†–ê–ù–û–í */
        .page {
            display: none; 
            padding: 16px; 
            padding-bottom: 100px; /* –û—Ç—Å—Ç—É–ø –ø–æ–¥ –Ω–∏–∂–Ω–µ–µ –º–µ–Ω—é */
            min-height: 100vh;
            box-sizing: border-box;
            animation: fadeIn 0.2s ease-out;
        }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* –û–ë–©–ò–ï –≠–õ–ï–ú–ï–ù–¢–´ */
        h1, h2, h3 { margin: 0; font-weight: 600; }
        .section-title { font-size: 20px; margin: 24px 0 16px 0; }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .btn-primary {
            background-color: var(--accent);
            color: #000000;
            border: none;
            border-radius: 12px;
            padding: 16px;
            font-size: 16px;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            transition: 0.2s;
        }
        .btn-primary:active { opacity: 0.7; }
        .btn-text {
            color: var(--accent); background: none; border: none; 
            font-size: 14px; padding: 0; cursor: pointer;
        }

        /* –ù–ò–ñ–ù–ï–ï –ù–ê–í–ò–ì–ê–¶–ò–û–ù–ù–û–ï –ú–ï–ù–Æ */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; right: 0;
            background-color: var(--bg-base);
            border-top: 1px solid var(--border);
            display: flex; justify-content: space-around; align-items: center;
            padding: 10px 0 20px 0; /* –£—á–∏—Ç—ã–≤–∞–µ–º "—á–µ–ª–∫—É" –∞–π—Ñ–æ–Ω–æ–≤ */
            z-index: 1000;
        }
        .nav-item {
            display: flex; flex-direction: column; align-items: center; gap: 4px;
            color: var(--text-muted); font-size: 11px; cursor: pointer; transition: 0.2s;
        }
        .nav-item svg { width: 24px; height: 24px; fill: currentColor; }
        .nav-item.active { color: var(--accent); }

        /* –≠–ö–†–ê–ù 1: –ì–õ–ê–í–ù–ê–Ø (–õ–ï–ù–¢–ê) */
        .header-profile { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; margin-top: 10px; }
        .header-profile h1 { font-size: 22px; color: var(--text-muted); font-weight: 500;}
        .header-profile h1 span { color: var(--text-main); font-weight: 600; }
        .avatar { width: 44px; height: 44px; background: var(--bg-surface-light); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; }

        .empty-state {
            background: var(--bg-surface); border-radius: 16px; padding: 24px 16px;
            text-align: center; margin-bottom: 24px; border: 1px solid var(--border);
        }
        .empty-state h3 { font-size: 16px; margin-bottom: 8px; font-weight: 500;}

        /* –ö–ê–†–¢–û–ß–ö–ê –ó–ê–ü–ò–°–ò (–¢–∞–π–º–ª–∞–π–Ω) */
        .time-slot { display: flex; gap: 16px; margin-bottom: 16px; align-items: flex-start; }
        .time-label { min-width: 45px; font-size: 15px; font-weight: 600; color: var(--text-muted); padding-top: 14px; text-align: right; }
        .slot-card {
            flex-grow: 1; background: var(--bg-surface); border-radius: 16px; padding: 16px;
            border-left: 4px solid var(--accent);
        }
        .slot-card .name { font-size: 17px; font-weight: 600; margin-bottom: 4px; color: var(--text-main); }
        .slot-card .service { font-size: 14px; color: var(--text-muted); margin-bottom: 8px; }
        .slot-card .notes { font-size: 13px; background: var(--bg-base); padding: 8px 12px; border-radius: 8px; color: #d1d1d6; margin: 0; }

        /* –≠–ö–†–ê–ù 2: –ö–ê–õ–ï–ù–î–ê–†–¨ */
        .cal-header { display: flex; justify-content: space-between; align-items: center; margin: 10px 0 24px 0; }
        .cal-header h2 { font-size: 18px; }
        .cal-nav-btn { background: var(--bg-surface); border: none; color: var(--text-main); width: 32px; height: 32px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center;}
        
        .calendar-grid {
            display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px;
            background: var(--bg-surface); padding: 16px; border-radius: 20px;
            margin-bottom: 24px;
        }
        .weekday { text-align: center; font-size: 13px; color: var(--text-muted); margin-bottom: 8px; }
        .day-cell {
            aspect-ratio: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-size: 16px; border-radius: 12px; cursor: pointer; position: relative; color: var(--text-main);
        }
        .day-cell.empty { background: transparent; cursor: default; }
        .day-cell.faded { color: #555; }
        .day-cell:not(.empty):active { background: var(--bg-surface-light); }
        .day-cell.today { border: 1px solid var(--border); }
        .day-cell.selected { background: var(--accent); color: #000; font-weight: bold; }
        
        .day-cell.has-records::after {
            content: ''; width: 5px; height: 5px; background: var(--text-muted);
            border-radius: 50%; position: absolute; bottom: 4px;
        }
        .day-cell.selected.has-records::after { background: #000; } /* –ß–µ—Ä–Ω–∞—è —Ç–æ—á–∫–∞ –Ω–∞ –∑–µ–ª–µ–Ω–æ–º —Ñ–æ–Ω–µ */

        /* –≠–ö–†–ê–ù 3: –§–û–†–ú–ê –î–û–ë–ê–í–õ–ï–ù–ò–Ø (–ü–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å—ë) */
        .modal {
            display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: var(--bg-base); z-index: 2000; padding: 16px; overflow-y: auto;
        }
        .modal.active { display: block; animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        
        .modal-header { display: flex; align-items: center; gap: 16px; margin-bottom: 24px; margin-top: 10px;}
        .back-btn { background: none; border: none; color: var(--accent); font-size: 24px; padding: 0; cursor: pointer; }
        
        /* –ü–æ–ª—è –≤–≤–æ–¥–∞ (–¢–µ–º–Ω—ã–µ) */
        .input-group { margin-bottom: 16px; }
        .input-group label { display: block; font-size: 13px; color: var(--text-muted); margin-bottom: 6px; margin-left: 4px;}
        input, select, textarea {
            width: 100%; padding: 16px; border: 1px solid var(--border); border-radius: 14px;
            background: var(--bg-surface); color: var(--text-main); font-size: 16px; box-sizing: border-box; font-family: inherit;
        }
        input:focus, select:focus, textarea:focus { outline: none; border-color: var(--accent); }
        input[type="time"]::-webkit-calendar-picker-indicator { filter: invert(1); }
        textarea { min-height: 100px; resize: none; }
    </style>
</head>
<body>

    <nav class="bottom-nav" id="bottomNav">
        <div class="nav-item active" onclick="switchTab('home')">
            <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
            –ì–ª–∞–≤–Ω–∞—è
        </div>
        <div class="nav-item" onclick="switchTab('calendar')">
            <svg viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/></svg>
            –ö–∞–ª–µ–Ω–¥–∞—Ä—å
        </div>
        <div class="nav-item" onclick="tg.showAlert('–†–∞–∑–¥–µ–ª –±–∞–∑—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ')">
            <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
            –ö–ª–∏–µ–Ω—Ç—ã
        </div>
        <div class="nav-item" onclick="tg.showAlert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –º–∞—Å—Ç–µ—Ä–∞')">
            <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            –ü—Ä–æ—Ñ–∏–ª—å
        </div>
    </nav>

    <div id="tab-home" class="page active">
        <div class="header-profile">
            <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <br><span id="masterName">–ú–∞—Å—Ç–µ—Ä</span>!</h1>
            <div class="avatar">üë§</div>
        </div>

        <div class="section-title">–°–µ–≥–æ–¥–Ω—è—à–Ω–∏–µ –∑–∞–ø–∏—Å–∏</div>
        
        <div id="homeScheduleContainer">
            </div>
    </div>

    <div id="tab-calendar" class="page">
        <div class="cal-header">
            <button class="cal-nav-btn" onclick="changeMonth(-1)">‚ùÆ</button>
            <h2 id="monthYearDisplay">–§–µ–≤—Ä–∞–ª—å 2025</h2>
            <button class="cal-nav-btn" onclick="changeMonth(1)">‚ùØ</button>
        </div>
        
        <div class="calendar-grid" id="calendarGrid">
            </div>

        <button class="btn-primary" style="margin-top: 10px;" onclick="openAddForm()">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ</button